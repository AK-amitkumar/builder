-
  !record {model: document.template, id: template_python_file_header}:
    name: builder.python_file_header.py
    title: builder.python_file_header.py
    type: jinja
    content: "# -*- coding: utf-8 -*-

##############################################################################

#

#    OpenERP, Open Source Management Solution

#    Copyright (C) 2004-2010 Tiny SPRL (<http://tiny.be>).

#

#    This program is free software: you can redistribute it and/or modify

#    it under the terms of the GNU Affero General Public License as

#    published by the Free Software Foundation, either version 3 of the

#    License, or (at your option) any later version.

#

#    This program is distributed in the hope that it will be useful,

#    but WITHOUT ANY WARRANTY; without even the implied warranty of

#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the

#    GNU Affero General Public License for more details.

#

#    You should have received a copy of the GNU Affero General Public License

#    along with this program.  If not, see <http://www.gnu.org/licenses/>.

#

##############################################################################

{% block content %}
{% endblock %}
"
-

-
  !record {model: document.template, id: template_base_xml}:
    name: builder.base.xml
    title: builder.base.xml
    type: jinja
    content: "<?xml version=\"1.0\"?>

<openerp>

    \t<data>

        \t\t{% block content %}

        \t\t{% endblock %}

    \t</data>

</openerp>
"
-

-
  !record {model: document.template, id: template_python_init}:
    name: builder.python.__init__.py
    title: builder.python.__init__.py
    type: jinja
    content: "{% include 'builder.python_file_header.py' ignore missing %}

{% for pack in packages -%}

\tfrom . import {{pack}}

{% endfor %}
"
-

-
  !record {model: document.template, id: template_models_py}:
    name: builder.models.py
    title: builder.models.py
    type: jinja
    content: "{% include 'builder.python_file_header.py' ignore missing %}

from openerp import models, fields, api, tools, _

from openerp.osv import fields as fields_old

import openerp.addons.decimal_precision as dp


{% for model in models %}

class {{model.name}}({% if model.osv_memory %}models.AbstractModel{% else %}models.Model{% endif %}):

\t    _name = '{{model.model}}'

\t    {% if model.parents_class_list %}_inherit = {{model.parents_class_list}}{% endif %}

\t    {% if model.inherits %}_inherits = {{model.inherits_class_dict}}{% endif %}

\t    {% if model.comment %}_description = '{{model.name}}'{% endif %}

\t    {% if model.handle_attribute %}_order = '{{model.handle_attribute.name}}' {% endif %}


\t    {% for field in model.field_ids -%}

\t\t    {{field.name}} = {{field.name}}

\t    {% endfor -%}


{% endfor %}
"
-

-
  !record {model: document.template, id: view_form_macros}:
    name: view_form_macros.xml
    title: view_form_macros.xml
    type: jinja
    content: "{% macro tree_tag(model, editable=False, extra='') -%}

        \t<tree string=\"{{model.class_name}}\" {% if editable %}editable=\"{{editable}}\"{% endif %} {{extra}} >

            \t\t{% for attr in model.view_tree_attributes -%}

              \t\t\t<field name=\"{{attr.name}}\" />

            \t\t{% endfor -%}

        \t</tree>

{%- endmacro %}



{% macro form_field(model, field) -%}

    \t{% if field.type in [\"many2many\", \"one2many\"] %}

        \t\t<field name=\"{{field.name}}\" mode=\"tree\" {% if field.options['widget'] %}widget=\"{{field.options['widget']}}\"{% endif %}>

            \t\t\t{{ tree_tag(field.options.related_class, editable=\"bottom\") }}

        \t\t</field>

    \t{% else -%}

      \t\t<field name=\"{{field.name}}\" {% if field.options['widget'] %}widget=\"{{field.options['widget']}}\"{% endif %}/>

    \t{%- endif %}

{%- endmacro %}




{% macro form_tag(model) -%}

    \t<form string=\"{{model.class_name}}\" version=\"7.0\">

        \t\t<sheet>

            \t\t\t<group col=\"4\">

                \t\t\t\t{% for attr in model.view_form_attributes -%}

                    \t\t\t\t\t{% if attr.type not in [\"many2many\", \"one2many\"] %}

                       \t\t\t\t\t\t{{ form_field(model, attr) }}

                    \t\t\t\t\t{% endif %}

                \t\t\t\t{% endfor -%}

            \t\t\t</group>



            \t\t\t{% for attr in model.view_form_attributes -%}

                \t\t\t\t{% if attr.type in [\"many2many\", \"one2many\"] %}

                    \t\t\t\t\t{{ form_field(model, attr) }}

                \t\t\t\t{% endif %}

            \t\t\t{% endfor -%}

        \t\t</sheet>

    \t</form>

{% endmacro -%}
"
-

-
  !record {model: document.template, id: template_menu_xml}:
    name: builder.menu.xml
    title: builder.menu.xml
    type: jinja
    content: "{%- extends 'builder.base.xml' %}


{% block content %}

\t\t<menuitem name=\"{{module.shortdesc}}\" id=\"{{module.name}}_menu_root\" />

{% endblock %}
"
-

-
  !record {model: document.template, id: python_module_info}:
    name: builder.__openerp__.py
    title: builder.__openerp__.py
    type: jinja
    content: "{% include 'builder.python_file_header.py' ignore missing %}

# noinspection PyStatementEffect

{

\t        \"name\" : \"{{module.name}}\",

{% if module.installed_version %}
\t        \"version\" : \"{{module.installed_version}}\",

{% endif %}
{% if module.author %}
\t        \"author\" : \"{{module.author}}\",

{% endif %}
{% if module.website %}
\t        \"website\" : \"{{module.website}}\",

{% endif %}
{% if module.category_id %}
\t        \"category\" : \"{{module.category_id}}\",

{% endif %}
\t        \"licence\" : \"{{module.license}}\",

\t        \"description\": \"\"\"

{{module.shortdesc}}

====================================

{{module.summary}}

\t        \"\"\",

\t        \"depends\" : {{ module.dependencies_as_list()[0] }},

\t        \"data\" : [

\t\t                'security/ir.model.access.csv',

\t\t                'views/menu.xml',

\t\t                'views/views.xml',

\t        ],

\t        \"demo\" : [ ],

\t        \"installable\": True,

\t        \"auto_install\": {{module.auto_install}},

\t        \"application\": {{module.application}},

}

"

-









